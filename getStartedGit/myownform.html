<!DOCTYPE html>
<html>
    <title>My Form</title>
    <body>
        
    </body>
    <header><h1>My Form</h1></header>
    <hr>

    <section class="container">
        <form id="my-form" onsubmit="storeToLocalStorage(event)">
            <h1>Add user</h1>
            <div class="msg"></div>
            <div>
                <label for="name">Name:</label>
                <br>
                <input type="text" id="name" required><br>
            
                <label for="email">Email:</label>
                <br>
                <input type="text" id="email" required><br>
            </div>
            <input class="button" type="submit" value="submit">
        </form>
    </section>
    <ul id="listofitems"></ul>
    <script >
        function storeToLocalStorage(event)
        {
            event.preventDefault();
            const name=event.target.name.value
            const email=event.target.email.value 

            const obj={
                name,
                email
            }
            localStorage.setItem(obj.email,JSON.stringify(obj))
            showUserOnScreen(obj)
        }

        function showUserOnScreen(obj)
        {
            const parentEle=document.parentElement("listofitems")
            const childEle=document.createElement('li')
            childEle.textContent=obj.name+'-'+obj.email;

            const deleteButton=document.createElement('input');
            deleteButton.type='button'
            deleteButton.value='Delete'

            deleteButton.onClick=() =>{
                localStorage.removeItem(obj.email)
                localStorage.removeItem(childEle)
            }
            childEle.appendChild(deleteButton)
            parentEle.appendChild(childEle)
        }

    
 
    </script>
</body>
</html>